
------------------------------------------------------------------------------------------
-- (신)개발서버 정보 (dev.ydns.co.kr(121.167.147.208), root/정보공학87@@, /home/apps/)
------------------------------------------------------------------------------------------

[root@localhost ~]# uname -a
Linux localhost.localdomain 3.10.0-693.el7.x86_64 #1 SMP Tue Aug 22 21:09:27 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux
[root@localhost ~]# cat /etc/*release*
CentOS Linux release 7.4.1708 (Core) 
Derived from Red Hat Enterprise Linux 7.4 (Source)
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:centos:centos:7"
HOME_URL="https://www.centos.org/"
BUG_REPORT_URL="https://bugs.centos.org/"

CENTOS_MANTISBT_PROJECT="CentOS-7"
CENTOS_MANTISBT_PROJECT_VERSION="7"
REDHAT_SUPPORT_PRODUCT="centos"
REDHAT_SUPPORT_PRODUCT_VERSION="7"

CentOS Linux release 7.4.1708 (Core) 
CentOS Linux release 7.4.1708 (Core) 
cpe:/o:centos:centos:7
[root@localhost ~]# 


-- 작업 프로세스

1. yum -y install compat-libgcc-296 compat-libstdc++-29 compat-libstdc++-33 gcc gcc-c++ glibc-deve glibc-headers libaio-devel glibc-headers libaio-devel libstdc++-devel  libXp compat-libstdc++-296

2. yum -y install sysstat.x86_64 unixODBC-devel.i686 unixODBC-devel.x86_64 pdksh.x86_64 elfutils-devel

3. cat /etc/sysctl.conf, vi /etc/sysctl.conf 

# For Oracle
net.ipv4.ip_local_port_range = 9000 65500
fs.file-max = 6815744
kernel.shmall = 10523004
kernel.shmmax = 6465333657
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.core.rmem_default=262144
net.core.wmem_default=262144
net.core.rmem_max=4194304
net.core.wmem_max=1048576
fs.aio-max-nr = 1048576
kernel.shmall = 8388608

4. /sbin/sysctl -p

5. cat /etc/security/limits.conf, vi /etc/security/limits.conf

#For Oracle
Oracle soft nproc 2047
Oracle hard nproc 16384
Oracle soft nofile 1024
oracle hard nofile 65536
oracle soft stack 10240

6. cat /etc/pam.d/login, vi /etc/pam.d/login
# add line start
session    required     pam_limits.so
# add line end


7. yum install tigervnc-server.x86_64

8. yum install pixman pixman-devel libXfont

9. yum -y groupinstall "GNOME Desktop" "Graphical Administration Tools"

10. ln -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target

11. yum install -y tigervnc-server

12. cp /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@:1.service

※ CentOS 6.x 버전까지는 /etc/sysconfig/vncservers 였으나 CentOS 7 로 올라오면서 해당 경로가 /lib/systemd/system/vncserver@.service 로 변경됨

13. vi /etc/systemd/system/vncserver@:1.service

#ExecStart=/usr/sbin/runuser -l <USER> -c "/usr/bin/vncserver %i"
ExecStart=/usr/sbin/runuser -l root -c "/usr/bin/vncserver %i"
#PIDFile=/home/<USER>/.vnc/%H%i.pid
PIDFile=/home/root/.vnc/%H%i.pid

14. systemctl daemon-reload

systemctl start vncserver@:2.service
systemctl stop vncserver@:2.service
15. systemctl enable vncserver@:2.service
systemctl disable vncserver@:2.service

systemctl start vncserver@:24110.service
systemctl enable vncserver@:24110.service


16. vncserver
You will require a password to access your desktops.

Password:    <-- VNC 패스워드
Verify:         <-- VNC 패스워드

17. firewall-cmd --permanent --zone=public --add-service vnc-server

firewall-cmd --add-port=5091-5903/tcp

firewall-cmd --permanent --zone=public --add-port=5091-5903/tcp

18. firewall-cmd --reload

17, 18 안되면

17. vi /etc/sysconfig/iptables

-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 5901 -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 5902 -j ACCEPT
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 5903 -j ACCEPT

18. /etc/init.d/iptables restart


/home/oracle/Downloads/database

./runInstaller -silent -responseFile /home/oracle/Downloads/database/response/db_install.rsp -waitForCompletion

./runInstaller -silent -ignorePrereq -force -waitforcompletion -responseFile /home/oracle/Downloads/database/response/db_install.rsp

DISPLAY=121.167.147.208:0.0; export DISPLAY

/home/apps/oracle/dbhome/bin

./netca -silent -responseFile /home/oracle/Downloads/database/response/netca.rsp

/home/apps/oracle/dbhome/bin

./dbca -silent -responseFile /home/oracle/Downloads/database/response/dbca.rsp

--------------------------------------
-- initorcl.ora
db_name = orcl
db_block_size = 8192
process = 500

shared_pool_size = 72M
db_cache_size = 64M
undo_management = auto
undo_tablespace = undotbs1

control_files = /home/apps/oracle/oradata/orcl/control01.ctl

remote_login_passwordfile=exclusive
--------------------------------------

oradim -new -sid orcl -intpwd orcl -startmode auto -pfile $ORACLE_HOME/dbs/initorcl.ora

SQL> ALTER SYSTEM SET LOCAL_LISTENER = "(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=30021))";

SQL> ALTER SYSTEM REGISTER;

--------------------------------------
-- result --
oracle user home : /home/oracle
oracle home : /home/apps/oracle/dbhome
sid : orcl
port : 30021
dba pw : orauser123
--------------------------------------
* tablespace : digitalcity (18/20) -- /home/apps/oracle/oradata/orcl/digitalcity.dbf

* user : digitalmayor/digitalmayor123

exp digitalmayor/digitalmayor123 file=/home/oracle/digitalmayor_user_dmp_20180604.dmp owner=digitalmayor

imp digitalmayor/digitalmayor123 file=digitalmayor_user_dmp_20180604.dmp fromuser=digitalmayor touser=digitalmayor ignore=y log=imp.log

while true; do ps -ef | grep igitalmayor_user_dmp_20180604.dmp; sleep 30; done;

 
[ 문자셋 확인 ]
SELECT name, value$
FROM sys.props$
WHERE name = 'NLS_CHARACTERSET';

SELECT name, value$
FROM sys.props$
WHERE name = 'NLS_NCHAR_CHARACTERSET';

[ 언어셋 확인 ]
SELECT name, value$
FROM sys.props$
WHERE name = 'NLS_LANGUAGE';


[ 문자셋 변경 ]
UPDATE sys.props$
SET value$ = '[ 변경을 원하는 문자셋 (KO16KSC5601, AL32UTF8 등)]'
WHERE name = 'NLS_CHARACTERSET';

UPDATE sys.props$
SET value$ = '[ 변경을 원하는 문자셋 (KO16KSC5601, AL32UTF8 등)]'
WHERE name = 'NLS_NCHAR_CHARACTERSET';

[ 언어셋 변경 ]
UPDATE sys.props$
SET value$ = '[ 변경을 원하는 문자셋 (AMERICAN_AMERICA.KO16KSC5601, AMERICAN_AMERICA.AL32UTF8등)]'
WHERE name = 'NLS_LANGUAGE'';

-----------------------------------------------------------------------------
[linkActive 설치 정보]

1. IP : 121.167.147.208 (root/정보공학87@@)
2. path : /home/apps/linkActive
3. start/shutdown
   가. start : ./start.sh {-sleep} {millisecond} (※ option, default 1000)
   나. shutdown : ./shutdown.sh
4. log
   tail -f nohup.out 
   or
   tail -f ./log/LOG[yymmdd].log
-----------------------------------------------------------------------------

------------------------------------------------------------------------------------------
-- (구)개발서버 정보 (root/yoon0690!​)
------------------------------------------------------------------------------------------

	[c:\~]$ 

	Connecting to 211.57.200.151:22...
	Connection established.
	To escape to local shell, press 'Ctrl+Alt+]'.

	Last failed login: Wed May 30 16:38:40 KST 2018 from 196.203.217.34 on ssh:notty
	There were 24 failed login attempts since the last successful login.
	Last login: Wed May 30 13:39:14 2018 from 202.14.90.162
	[root@localhost ~]# cat /etc/*release*
		CentOS Linux release 7.2.1511 (Core) 
		Derived from Red Hat Enterprise Linux 7.2 (Source)
		NAME="CentOS Linux"
		VERSION="7 (Core)"
		ID="centos"
		ID_LIKE="rhel fedora"
		VERSION_ID="7"
		PRETTY_NAME="CentOS Linux 7 (Core)"
		ANSI_COLOR="0;31"
		CPE_NAME="cpe:/o:centos:centos:7"
		HOME_URL="https://www.centos.org/"
		BUG_REPORT_URL="https://bugs.centos.org/"

		CENTOS_MANTISBT_PROJECT="CentOS-7"
		CENTOS_MANTISBT_PROJECT_VERSION="7"
		REDHAT_SUPPORT_PRODUCT="centos"
		REDHAT_SUPPORT_PRODUCT_VERSION="7"

		CentOS Linux release 7.2.1511 (Core) 
		CentOS Linux release 7.2.1511 (Core) 
		cpe:/o:centos:centos:7
	[root@localhost ~]# cat /etc/passwd
		root:x:0:0:root:/root:/bin/bash
		bin:x:1:1:bin:/bin:/sbin/nologin
		daemon:x:2:2:daemon:/sbin:/sbin/nologin
		adm:x:3:4:adm:/var/adm:/sbin/nologin
		lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin
		sync:x:5:0:sync:/sbin:/bin/sync
		shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown
		halt:x:7:0:halt:/sbin:/sbin/halt
		mail:x:8:12:mail:/var/spool/mail:/sbin/nologin
		operator:x:11:0:operator:/root:/sbin/nologin
		games:x:12:100:games:/usr/games:/sbin/nologin
		ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
		nobody:x:99:99:Nobody:/:/sbin/nologin
		dbus:x:81:81:System message bus:/:/sbin/nologin
		polkitd:x:999:998:User for polkitd:/:/sbin/nologin
		avahi:x:70:70:Avahi mDNS/DNS-SD Stack:/var/run/avahi-daemon:/sbin/nologin
		avahi-autoipd:x:170:170:Avahi IPv4LL Stack:/var/lib/avahi-autoipd:/sbin/nologin
		postfix:x:89:89::/var/spool/postfix:/sbin/nologin
		sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
		systemd-bus-proxy:x:998:996:systemd Bus Proxy:/:/sbin/nologin
		systemd-network:x:997:995:systemd Network Management:/:/sbin/nologin
		saslauth:x:996:76:Saslauthd user:/run/saslauthd:/sbin/nologin
		apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin
		tss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologin
		wezem:x:1000:1000::/home/wezem:/bin/bash
		geoclue:x:995:994:User for geoclue:/var/lib/geoclue:/sbin/nologin
		usbmuxd:x:113:113:usbmuxd user:/:/sbin/nologin
		rtkit:x:172:172:RealtimeKit:/proc:/sbin/nologin
		colord:x:994:993:User for colord:/var/lib/colord:/sbin/nologin
		pulse:x:171:171:PulseAudio System Daemon:/var/run/pulse:/sbin/nologin
		gdm:x:42:42::/var/lib/gdm:/sbin/nologin
		oracle:x:1001:1001::/home/oracle:/bin/bash
		matrix:x:1002:1003::/home/matrix:/bin/bash
		heungshik:x:121:100::/home/heungshik:/bin/bash
		sykim:x:122:100::/home/sykim:/bin/bash
		hjkim:x:123:100::/home/hjkim:/bin/bash
		nhkim:x:124:100::/home/nhkim:/bin/bash
		mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/bash
		chrony:x:993:500::/var/lib/chrony:/sbin/nologin
		cctv:x:1003:1004::/home/cctv:/bin/bash
		openproject:x:992:499::/home/openproject:/bin/bash
		memcached:x:991:498:Memcached daemon:/run/memcached:/sbin/nologin
	[root@localhost ~]# 

-- oracle 환경

	[oracle@localhost ~]$ env
		XDG_SESSION_ID=226647
		HOSTNAME=localhost.localdomain
		SHELL=/bin/bash
		TERM=xterm
		HISTSIZE=1000
		ORACLE_UNQNAME=CENTORA
		QT_GRAPHICSSYSTEM_CHECKED=1
		USER=oracle
		LD_LIBRARY_PATH=/apps/oracle11g/dbhome/lib:/lib:/usr/lib
		LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
		ORACLE_SID=CENTORA
		ORACLE_HOME_LISTNER=/apps/oracle11g/dbhome/bin/lsnrctl
		ORACLE_BASE=/apps/oracle11g
		MAIL=/var/spool/mail/oracle
		PATH=/usr/sbin:/usr/local/bin:/bin:/usr/bin:/usr/local/java/jdk_1.8/jdk1.8.0_101/bin:/usr/local/sbin:/usr/sbin:/apps/oracle11g/dbhome/bin
		PWD=/home/oracle
		JAVA_HOME=/usr/local/java/jdk_1.8/jdk1.8.0_101
		LANG=en_US.UTF-8
		HISTCONTROL=ignoredups
		SHLVL=1
		HOME=/home/oracle
		LOGNAME=oracle
		CLASSPATH=/apps/oracle11g/dbhome/jlib:/apps/oracle11g/dbhome/rdbms/jlib
		LESSOPEN=||/usr/bin/lesspipe.sh %s
		ORACLE_HOME=/apps/oracle11g/dbhome
		_=/bin/env

	[oracle@localhost ~]$ cat .bash_profile
		# .bash_profile

		# Get the aliases and functions
		if [ -f ~/.bashrc ]; then
			. ~/.bashrc
		fi

		# User specific environment and startup programs

		export ORACLE_BASE=/apps/oracle11g
		export ORACLE_SID=CENTORA
		export ORACLE_UNQNAME=CENTORA
		export ORACLE_HOME=/apps/oracle11g/dbhome
		export ORACLE_HOME_LISTNER=$ORACLE_HOME/bin/lsnrctl
		PATH=/usr/sbin:$PATH:$ORACLE_HOME/bin
		export PATH
		export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib;
		export CLASSPATH=$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib;
		umask 022
		export LANG=en_US.UTF-8


	[oracle@localhost ~]$ 

	[oracle@localhost home]$ cat /etc/sysctl.conf
		# System default settings live in /usr/lib/sysctl.d/00-system.conf.
		# To override those settings, enter new settings here, or in an /etc/sysctl.d/<name>.conf file
		#
		# For more information, see sysctl.conf(5) and sysctl.d(5).
		net.ipv4.ip_local_port_range = 9000 65500
		fs.file-max = 6815744
		kernel.shmall = 10523004
		kernel.shmmax = 6465333657
		kernel.shmmni = 4096
		kernel.sem = 250 32000 100 128
		net.core.rmem_default=262144
		net.core.wmem_default=262144
		net.core.rmem_max=4194304
		net.core.wmem_max=1048576
		fs.aio-max-nr = 1048576
		kernel.shmall = 8388608
	[oracle@localhost home]$ 

	[oracle@localhost home]$ cat /etc/security/limits.conf
		# /etc/security/limits.conf
		#
		#This file sets the resource limits for the users logged in via PAM.
		#It does not affect resource limits of the system services.
		#
		#Also note that configuration files in /etc/security/limits.d directory,
		#which are read in alphabetical order, override the settings in this
		#file in case the domain is the same or more specific.
		#That means for example that setting a limit for wildcard domain here
		#can be overriden with a wildcard setting in a config file in the
		#subdirectory, but a user specific setting here can be overriden only
		#with a user specific setting in the subdirectory.
		#
		#Each line describes a limit for a user in the form:
		#
		#<domain>        <type>  <item>  <value>
		#
		#Where:
		#<domain> can be:
		#        - a user name
		#        - a group name, with @group syntax
		#        - the wildcard *, for default entry
		#        - the wildcard %, can be also used with %group syntax,
		#                 for maxlogin limit
		#
		#<type> can have the two values:
		#        - "soft" for enforcing the soft limits
		#        - "hard" for enforcing hard limits
		#
		#<item> can be one of the following:
		#        - core - limits the core file size (KB)
		#        - data - max data size (KB)
		#        - fsize - maximum filesize (KB)
		#        - memlock - max locked-in-memory address space (KB)
		#        - nofile - max number of open file descriptors
		#        - rss - max resident set size (KB)
		#        - stack - max stack size (KB)
		#        - cpu - max CPU time (MIN)
		#        - nproc - max number of processes
		#        - as - address space limit (KB)
		#        - maxlogins - max number of logins for this user
		#        - maxsyslogins - max number of logins on the system
		#        - priority - the priority to run user process with
		#        - locks - max number of file locks the user can hold
		#        - sigpending - max number of pending signals
		#        - msgqueue - max memory used by POSIX message queues (bytes)
		#        - nice - max nice priority allowed to raise to values: [-20, 19]
		#        - rtprio - max realtime priority
		#
		#<domain>      <type>  <item>         <value>
		#

		#*               soft    core            0
		#*               hard    rss             10000
		#@student        hard    nproc           20
		#@faculty        soft    nproc           20
		#@faculty        hard    nproc           50
		#ftp             hard    nproc           0
		#@student        -       maxlogins       4
		Oracle soft nproc 2047
		Oracle hard nproc 16384
		Oracle soft nofile 1024
		oracle hard nofile 65536
		oracle soft stack 10240
			
		# End of file
	[oracle@localhost home]$ 

	[oracle@localhost home]$ cat /etc/pam.d/login
		#%PAM-1.0
		auth [user_unknown=ignore success=ok ignore=ignore default=bad] pam_securetty.so
		auth       substack     system-auth
		auth       include      postlogin
		account    required     pam_nologin.so
		account    include      system-auth
		password   include      system-auth
		# pam_selinux.so close should be the first session rule
		session    required     pam_selinux.so close
		session    required     pam_loginuid.so
		session    optional     pam_console.so
		# pam_selinux.so open should only be followed by sessions to be executed in the user context
		session    required     pam_selinux.so open
		session    required     pam_namespace.so
		# add line start
		session    required     pam_limits.so
		# add line end
		session    optional     pam_keyinit.so force revoke
		session    include      system-auth
		session    include      postlogin
		-session   optional     pam_ck_connector.so
	[oracle@localhost home]$ 



exp digitalmayor/digitalmayor123 file=/home/oracle/digitalmayor_user_dmp_20180705.dmp owner=digitalmayor

imp digitalmayor/digitalmayor123 file=digitalmayor_user_dmp_20180705.dmp fromuser=digitalmayor touser=digitalmayor ignore=y log=imp.log


expdp digitalmayor/digitalmayor123 dump_file=/home/oracle/src/digitalmayor_user_dmp_20180705.dmp schemas=digitalmayor version=10.2.0